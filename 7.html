<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/7.css">
    <script src="./js/4.js"></script>
    <script src="./js/touch-0.2.14.min.js"></script>
    <script src="./js/cookie.js"></script>
</head>

<body>
    <div class="box">
        <div class="box1">
            <div>
                <img src="./image/index/logo.jpg" alt="">
            </div>
            <div>
                <img src="./image/index/my.jpg" alt="">
            </div>
            <div>
                <img src="./image/index/xiazai.jpg" alt="">
            </div>
        </div>
        <p class="p1"><span>首页</span>>我的>注册</p>
        <ul>
            <li>
                <input class="ipt1" type="text" placeholder="请输入手机号码">
                <a href="#" class="yz">发送验证码</a>
                <span class="sp1"></span>
            </li>
            <li>
                <input class="ipt2" type="text" placeholder="请输入短信中的验证码">
                <span class="sp2"></span>
            </li>
            <li>
                <input class="ipt3" type="password" placeholder="请输入新密码">
                <span class="sp3"></span>
            </li>
        </ul>
        <button>立即注册</button>
    </div>
</body>

</html>
<script>
    var ipt1 = document.getElementsByClassName('ipt1')[0];
    var ipt2 = document.getElementsByClassName('ipt2')[0];
    var ipt3 = document.getElementsByClassName('ipt3')[0];
    var yz = document.getElementsByClassName('yz')[0];
    var sp1 = document.getElementsByClassName('sp1')[0];
    var sp2 = document.getElementsByClassName('sp2')[0];
    var sp3 = document.getElementsByClassName('sp3')[0];
    var btn = document.getElementsByTagName('button')[0];
    var num = 60;
    var timer = '';

    function fn() {
        num = --num;
        yz.innerText = num + '秒后重发';
        if (num == 57) {
            alert('验证码:0134')
        } else if (num <= 0) {
            yz.innerText = '重新发送';
        }
    }
    touch.on(yz, 'tap', function () {
        clearInterval(timer);
        timer = setInterval(fn, 1000);
    });
    ipt1.onblur = function () {
        var reg = /^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/;
        right = reg.test(ipt1.value); //true
        if (ipt1.value == '') {
            sp1.innerText = '手机号为空';
            sp1.style.color = 'red';
        } else if (!right) {
            sp1.innerText = '手机号输入有误';
            sp1.style.color = 'red';
        } else {
            sp1.innerText = '正确';
            sp1.style.color = 'green';
        }
    }
    ipt2.onblur = function () {
        if (ipt2.value == '0134') {
            sp2.innerText = '输入正确';
            sp2.style.color = 'green';
            right1 = true;
        } else {
            sp2.innerText = '输入有误,请重新输入';
            sp2.style.color = 'red';
        }
    }
    ipt3.onfocus = function () {
        sp3.innerText = '由数字字母下划线组成，密码长度不能小于6位';
    }
    ipt3.onblur = function () {
        var reg = /^\w{6,}$/;
        right2 = reg.test(ipt3.value);
        if (ipt3.value == '') {
            sp3.innerText = '密码不能为空';
            sp3.style.color = 'red';
        } else if (!right2) {
            sp3.innerText = '不符合规范';
            sp3.style.color = 'red';
        } else {
            sp3.innerText = '密码正确';
            sp3.style.color = 'green';
        }
    }
    touch.on(btn, 'tap', function () {
        if (right == true && right1 == true && right2 == true) {
            alert('注册成功');
            window.location.href = './11.html';
            window.event.returnValue = false;
            setCookie('手机号', ipt1.value);
            setCookie('密码', ipt3.value);
        } else {
            alert('注册失败，请重新注册');
        }
    });
</script>